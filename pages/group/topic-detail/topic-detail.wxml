<import src="../../../wxParse/wxParse.wxml" />
<!-- 整体容器 -->
<view class='container'>

  <!-- 上部 -->
  <view class='uppart'>

    <view class='title'>{{infolist.topic_title}}</view>
    <view class='time-reads'>
      <text class='time'>{{infolist.create_time}}</text>
      <text class='reads'>阅读量：{{infolist.reply_count}}</text>
    </view>

    <template is="wxParse" data="{{wxParseData:article.nodes}}" />

  </view>
  <!-- 中间行 -->
  <view class='colorline'></view>

  <!-- 下部 -->

  <view class='title-line'>
    <text>全部评论：{{commentslist.length}}</text>
    <image src='/image/icon/talk.png' bindtap='myTalk'></image>
  </view>


  <view class='comments-list' wx:for="{{commentslist}}" wx:key='list-id'>

    <view class='list-item'>

      <!-- 左边头像容器 -->
      <view class='left-head'>
        <image src='{{item.pub_head}}' class='header'></image>
      </view>
      <!-- 右边文字容器 -->
      <view class='right-info'>
        <view class='name-info'>
          <view class='username'>{{item.pub_nick}}</view>
          <view class='info'>{{item.comment_content}}</view>
        </view>

        <!-- 一条回复的情况 -->
        <view class='reply' wx:if="{{item.reply_list.length==1}}">
          <text class="count">共有{{item.reply_list.length}}条回复></text>
        </view>

        <!-- 俩条回复的情况 -->

        <view class='replys' wx:if="{{item.reply_list.length==2}}">
          <view class='reply-item'>
            <text class="count">{{item.reply_list[0].comment_content[0]}}回复{{item.reply_list[0].comment_content[1]}}:</text>
            <text class='reply-item-info'>{{item.reply_list[0].comment_content[2]}}</text>
          </view>

          <view class='reply-item'>
            <text class="count">{{item.reply_list[1].comment_content[0]}}回复{{item.reply_list[0].comment_content[1]}}:</text>
            <text class='reply-item-info'>{{item.reply_list[1].comment_content[2]}}</text>
          </view>
        </view>


        <!-- 多条回复的情况 -->
        <view class='replys' wx:if="{{item.reply_list.length!=0}}">
          <view class='reply-item'>
            <text class="count">{{item.reply_list[0].comment_content[0]}}回复{{item.reply_list[0].comment_content[1]}}:</text>
            <text class='reply-item-info'>{{item.reply_list[0].comment_content[2]}}</text>
          </view>

          <view class='reply-item'>
            <text class="count">{{item.reply_list[1].comment_content[0]}}回复{{item.reply_list[0].comment_content[1]}}:</text>
            <text class='reply-item-info'>{{item.reply_list[1].comment_content[2]}}</text>
          </view>
          <text class="count">共有{{item.reply_list.length}}条回复></text>
        </view>


        <view class='time-icon'>
          <text>{{item.create_time}}</text>
          <view class='icon'>
            <image src='/image/icon/del.png' style='width:36rpx;height:36rpx;' wx:if="{{item.type!=1}}" bindtap='toDel'></image>
            <image src='/image/icon/talk1.png' style='width:36rpx;height:36rpx;margin-left:50rpx' bindtap='toTalk'></image>
          </view>
        </view>


      </view>

    </view>

  </view>

</view>


<!-- 评论输入框 -->
<view class='window' wx:if="{{wind}}" bindtap='closeWind'></view>
<view class='input-line row' wx:if="{{wind}}">
  <input type='text' placeholder='评论' value='{{value}}' bindinput='toVal'></input>
  <view class='sndBtn' bindtap='toSand'>发布</view>
</view>